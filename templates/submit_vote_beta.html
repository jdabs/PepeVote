{% extends "layout.html" %}
{% block body %}
<div class='flex-column align-items-center justify-content-center d-flex'>
    <div class='nice-header'>Vote Submission</div>
    <div class='alone-text'>To submit the vote you can manually sign <b>or</b> you can use RarePepeWallet</div>
    <div class='submit-holder flex-row justify-content-between d-flex'>
        <div class='man-sign flex-column align-items-center justify-content-center d-flex'>
            <br>
            <form class='center-text flex-column align-items-center justify-content-center d-flex' action="/submit_vote" method="POST">
                Copy the following message, and sign it with Counterwallet:
                <br>
                <br>
                <input type="text" name="vote_string" value="{{ vote_string }}" id="message" readonly="readonly">
                <button type="button" class="btn" data-clipboard-target="#message">
                    <img src="static/clippy.svg" alt="Copy to clipboard" width="13">
                </button>
                <br>
                Paste the signature from Counterwallet here:
                <br>
                <input type="text" name="signature">
                <br>
                <input class='btn btn-primary' type="submit" value="Vote">
            </form>
            <br>
            Status: {{status}}
            <br>
            <br>
        </div>
        <div class='divider'></div>
        <div class='pepe-sign  p-2 flex-column align-items-center justify-content-center d-flex'>
            <button id='pepe-sign' class='btn btn-primary' type="button" id="submitbroken">Sign With RarePepeWallet</button>
            <iframe id='pepe-frame' frameborder='0' noresize='noresize' style='display:none; position: absolute; background: transparent; width:400px; height:400px;' 
                src="https://rarepepewallet.com/?who=pepevote&msg={{ vote_string_hash }}&return=https://pepevote.com/rpwverify" frameborder="0">
            </iframe>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
    <script>
    var clipboard = new ClipboardJS('.btn');
    clipboard.on('success', function(e) {
        console.log(e);
    });
    clipboard.on('error', function(e) {
        console.log(e);
    });

    $(document).ready(function(){
        $('#pepe-sign').click(function() {
            $('#pepe-frame').css('display', 'flex');
        })
    });
    </script>
{% endblock %}
